#include <stdio.h>
#include <stdlib.h>

char szyfr[36][6];

struct trie{
    char l;
    struct trie *dot;
    struct trie *line;
}f;

struct trie *T;

void init(){
    char alf[]={"abcdefghijklmnopqrstuvwxyz0123456789"};
    char tmp[]={".- -... -.-. -.. . ..-. --. .... .. .--- -.- .-.. -- -. --- .--. --.- .-. ... - ..- ...- .-- -..- -.-- --.. ----- .---- ..--- ...-- ....- ..... -.... --... ---.. ----."};
    int ite=0;
    for(int i=0; i<36; i++){
        int j=0;
        while(tmp[ite]!=' ')
            szyfr[i][j++]=tmp[ite++];
        szyfr[i][j]='\0';
        ite++;
    }
    T=(struct trie*)calloc(sizeof(struct trie),1);
    ite=0;
    int j=0;
    struct trie *g=T;
    while(tmp[j]!='\0'){
        if(tmp[j]==' '){
            j++;
            continue;
        }
        if(tmp[j]=='.'){
            if(T->dot==NULL)
                T->dot=(struct trie*)calloc(sizeof(struct trie),1);
            T=T->dot;
        }
        else{
            if(T->line==NULL)
                T->line=(struct trie*)calloc(sizeof(struct trie),1);
            T=T->line;
        }
        if(tmp[j+1]==' ' || tmp[j+1]=='\0'){
            T->l=alf[ite++];
            T=g;
        }
        j++;
    }
}
/*
void func(struct trie *x){
    if(x->l!=0)
        printf("%c\n",x->l);
    if(x->dot!=NULL)
        func(x->dot);
    if(x->line!=NULL)
        func(x->line);
}
*/
int main(){
    init();
    //func(T);
    int t;
    printf("szyfrowanie - 0, odszyfrowanie - 1\n");
    scanf("%d",&t);
    if(t==0){
        char x;
        while((x=getchar())!=EOF){
            if(x=='\n'){
                printf("\n");
                continue;
            }
            if(x-'a'>=0 && x-'z'<=0)
                printf("%s ",szyfr[x-'a']);
            else
                if(x-'0'>=0 && x-'9'<=0)
                    printf("%s ",szyfr[x-'0'+26]);
                else
                    printf("& ");
        }
    }
    if(t==1){
        struct trie *g=T;
        char x;
        while((x=getchar())){
            printf("x=%c\n",x);
            if(x==EOF)
                return 0;
            if(x==' ' || x=='\n'){
                printf("%c",g->l);
                if()
                break;
            }
            if(x=='.')
                g=g->dot;
            if(x=='-')
                g=g->line;
        }
    }
}
